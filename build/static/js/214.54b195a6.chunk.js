"use strict";(self.webpackChunkemilus=self.webpackChunkemilus||[]).push([[214],{8470:function(e,t,n){var r=n(1413),a=n(4236).Z.div((function(e){var t=e.justifyContent,n=e.alignItems,a=e.flexDirection,i=e.gap,o=e.padding,s=e.margin,c={display:"flex",justifyContent:t,alignItems:n,gap:"number"===typeof i?"".concat(i,"px"):i};return a&&(c.flexDirection=a),o&&(c.padding=o),s&&(c.margin=s),(0,r.Z)({},c)}));t.Z=a},2703:function(e,t,n){var r=n(5671),a=n(3144),i=function(){function e(){(0,r.Z)(this,e)}return(0,a.Z)(e,null,[{key:"getNameInitial",value:function(e){var t=e.match(/\b\w/g)||[];return((t.shift()||"")+(t.pop()||"")).toUpperCase()}},{key:"getRouteInfo",value:function(e,t){if(e.path===t)return e;var n;for(var r in e)if(e.hasOwnProperty(r)&&"object"===typeof e[r]&&(n=this.getRouteInfo(e[r],t)))return n;return n}},{key:"getColorContrast",value:function(e){if(!e)return"dark";var t=parseInt(a(e).substring(0,2),16),n=function(e){return parseInt(a(e).substring(2,4),16)}(e),r=function(e){return parseInt(a(e).substring(4,6),16)}(e);function a(e){return"#"===e.charAt(0)?e.substring(1,7):e}return(299*t+587*n+114*r)/1e3>130?"dark":"light"}},{key:"shadeColor",value:function(e,t){var n=parseInt(e.substring(1,3),16),r=parseInt(e.substring(3,5),16),a=parseInt(e.substring(5,7),16);n=parseInt(n*(100+t)/100),r=(r=parseInt(r*(100+t)/100))<255?r:255,a=(a=parseInt(a*(100+t)/100))<255?a:255;var i=1===(n=n<255?n:255).toString(16).length?"0".concat(n.toString(16)):n.toString(16),o=1===r.toString(16).length?"0".concat(r.toString(16)):r.toString(16),s=1===a.toString(16).length?"0".concat(a.toString(16)):a.toString(16);return"#".concat(i).concat(o).concat(s)}},{key:"rgbaToHex",value:function(e){var t=function(e){return e.replace(/^\s+|\s+$/gm,"")},n=e.substring(e.indexOf("(")).split(","),r=parseInt(t(n[0].substring(1)),10),a=parseInt(t(n[1]),10),i=parseInt(t(n[2]),10),o=parseFloat(t(n[3].substring(0,n[3].length-1))).toFixed(2),s=[r.toString(16),a.toString(16),i.toString(16),Math.round(255*o).toString(16).substring(0,2)];return s.forEach((function(e,t){1===e.length&&(s[t]="0"+e)})),"#".concat(s.join(""))}},{key:"getSignNum",value:function(e,t,n){return e>0?t:e<0?n:null}},{key:"antdTableSorter",value:function(e,t,n){return"number"===typeof e[n]&&"number"===typeof t[n]?e[n]-t[n]:"string"===typeof e[n]&&"string"===typeof t[n]?(e=e[n].toLowerCase())>(t=t[n].toLowerCase())?-1:t>e?1:0:void 0}},{key:"filterArray",value:function(e,t,n){var r=e;return e&&(r=e.filter((function(e){return e[t]===n}))),r}},{key:"deleteArrayRow",value:function(e,t,n){var r=e;return e&&(r=e.filter((function(e){return e[t]!==n}))),r}},{key:"wildCardSearch",value:function(e,t){return e=e.filter((function(e){return function(e){for(var n in e)if(null!=e[n]&&-1!==e[n].toString().toUpperCase().indexOf(t.toString().toUpperCase()))return!0}(e)}))}},{key:"getBreakPoint",value:function(e){var t=[];for(var n in e){if(e.hasOwnProperty(n))e[n]&&t.push(n)}return t}}]),e}();t.Z=i},7214:function(e,t,n){n.r(t),n.d(t,{User:function(){return _}});var r=n(4165),a=n(1413),i=n(5861),o=n(9439),s=n(2791),c=n(2999),u=n(7615),l=n(6090),d=n(7888),p=n(2835),f=n(7309),g=n(9004),m=n(7828),h=n(8470),v=n(7007),x=n(1730),y=n(9286),Z=n(2703),b=n(184),S=c.Z.Option,_=function(){var e=u.Z.useForm(),t=(0,o.Z)(e,1)[0],n=(0,s.useState)([]),_=(0,o.Z)(n,2),I=(_[0],_[1],(0,s.useState)([])),P=(0,o.Z)(I,2),j=(P[0],P[1]),k=(0,s.useState)(!1),w=(0,o.Z)(k,2),C=w[0],A=w[1],N=(0,s.useState)([]),F=(0,o.Z)(N,2),L=F[0],O=F[1],T=(0,s.useState)([]),q=(0,o.Z)(T,2),E=q[0],U=q[1],R=(0,s.useState)([]),D=(0,o.Z)(R,2),B=D[0],H=D[1],K=(0,s.useState)(),M=(0,o.Z)(K,2),$=M[0],z=M[1],G=(0,s.useState)([]),J=(0,o.Z)(G,2),Q=J[0],V=J[1],W=(0,s.useState)(localStorage.getItem("role")||""),X=(0,o.Z)(W,2),Y=X[0],ee=X[1],te=function(e,t,n){l.Z[e]({message:t,description:n})};(0,s.useEffect)((function(){ee(re())}),[]);var ne=function(){A(!1)},re=function(){return localStorage.getItem("role")},ae=localStorage.getItem("admin_id"),ie=localStorage.getItem("distributor_id"),oe=localStorage.getItem("dealer_id"),se=localStorage.getItem("subdealer_id"),ce=localStorage.getItem("id"),ue=re(),le=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var i,o,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,a.Z)((0,a.Z)({},n),{},{admin_id:ae,distributor_id:ie,dealer_id:oe,subdealer_id:se,created_by:ce,role_id:ue}),e.prev=1,e.next=4,v.ZP.post("point",i);case 4:t.resetFields(),te("success","Point","Point Saved Successfully!"),fe(),ne(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),e.t0.response&&403===e.t0.response.status&&(o=e.t0.response.data,te("error","Point",o.message),o.message&&"object"===typeof o.message&&(s=o.message,te("error","Point",s)));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();function de(){return(de=(0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.ZP.get("plan");case 3:(t=e.sent).data.success?V(t.data.data):console.error("API request was not successful"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching countries:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function pe(){return(pe=(0,i.Z)((0,r.Z)().mark((function e(){var t,n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={user_id:ce,role_id:ue},e.prev=1,e.next=4,v.ZP.post("user_point_list",t);case 4:n=e.sent,console.log(n),n.data.success?H(n.data.data):console.error("API request was not successful"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error("Error fetching users:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function fe(){return ge.apply(this,arguments)}function ge(){return(ge=(0,i.Z)((0,r.Z)().mark((function e(){var t,n,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={user_id:ce,role_id:ue},e.next=4,v.ZP.post("point_stock_list",t);case 4:(n=e.sent).data&&Array.isArray(n.data.data)?(a=n.data.data.map((function(e){return{id:e.id,point_type:e.point_type,package_code:e.package_code,package_name:e.package_name,period_name:e.period_name,period_days:e.period_days,name:e.name,total_point:e.total_point}})),console.log(a),O(a),U(a)):console.error("API request was not successful"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error fetching users:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}(0,s.useEffect)((function(){!function(){de.apply(this,arguments)}(),function(){pe.apply(this,arguments)}(),fe()}),[]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(d.Z,{title:"Points",children:[(0,b.jsxs)(h.Z,{alignItems:"center",justifyContent:"space-between",mobileFlex:!1,children:[(0,b.jsxs)(h.Z,{className:"mb-1",mobileFlex:!1,children:[(0,b.jsx)("div",{className:"mr-md-3 mb-3",children:(0,b.jsx)(p.Z,{placeholder:"Search",prefix:(0,b.jsx)(x.Z,{}),onChange:function(e){return function(e){var t=e.currentTarget.value,n=e.currentTarget.value?L:E,r=Z.Z.wildCardSearch(n,t);O(r),j([])}(e)}})}),(0,b.jsx)("div",{className:"mb-3"})]}),5!=Y&&(0,b.jsx)("div",{className:"mb-3",children:(0,b.jsx)(f.ZP,{type:"primary",icon:(0,b.jsx)(y.Z,{}),onClick:function(){A(!0)},ghost:!0,children:"Add Points"})})]}),(0,b.jsx)("div",{className:"table-responsive",children:(0,b.jsx)(g.Z,{bordered:!0,columns:[{title:"Point Type",dataIndex:"point_type"},{title:"Package Code",dataIndex:"package_code"},{title:"Package Name",dataIndex:"package_name"},{title:"Period Name",dataIndex:"period_name"},{title:"Period Days",dataIndex:"period_days"},{title:"Total Points",dataIndex:"total_point"},{title:"Name",dataIndex:"name"}],dataSource:L,rowKey:"id"})})]}),(0,b.jsx)(m.Z,{placement:"left",closable:!1,onClose:ne,open:C,children:(0,b.jsxs)("div",{className:"container",children:[(0,b.jsx)("h2",{children:"Point Info"}),(0,b.jsxs)(u.Z,{name:"registrationForm",onFinish:le,layout:"vertical",form:t,children:[(0,b.jsx)(u.Z.Item,{label:"User",name:"user_id",rules:[{required:!0,message:"Please Select Plan"}],children:(0,b.jsx)(c.Z,{showSearch:!0,allowClear:!0,optionFilterProp:"children",value:H,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:Array.isArray(B)?B.map((function(e){return(0,b.jsx)(S,{value:e.id,children:e.name},e.id)})):(0,b.jsx)(S,{value:"Loading",children:"Loading..."})})}),(0,b.jsx)(u.Z.Item,{label:"Point Type",name:"point_type_id",rules:[{required:!0,message:"Please Select Point Type"}],children:(0,b.jsxs)(c.Z,{children:[(0,b.jsx)(S,{value:"1",children:"New Point"}),(0,b.jsx)(S,{value:"2",children:"Recharge Point"})]})}),(0,b.jsx)(u.Z.Item,{label:"Plan",name:"plan_id",rules:[{required:!0,message:"Please Select Plan"}],children:(0,b.jsx)(c.Z,{showSearch:!0,optionFilterProp:"children",allowClear:!0,onChange:function(e){z(e)},value:$,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:Array.isArray(Q)?Q.map((function(e){return(0,b.jsx)(S,{value:e.id,children:e.package_name+"  -  "+e.period_name},e.id)})):(0,b.jsx)(S,{value:"Loading",children:"Loading..."})})}),(0,b.jsx)(u.Z.Item,{label:"Points",name:"total_point",rules:[{required:!0,message:"Please Enter Points"}],children:(0,b.jsx)(p.Z,{type:"number",max:100})}),(0,b.jsx)(u.Z.Item,{children:(0,b.jsx)(f.ZP,{type:"primary",htmlType:"submit",children:"Save"})})]})]})})]})};t.default=_}}]);
//# sourceMappingURL=214.54b195a6.chunk.js.map