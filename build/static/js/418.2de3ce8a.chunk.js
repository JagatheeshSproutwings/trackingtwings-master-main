"use strict";(self.webpackChunkemilus=self.webpackChunkemilus||[]).push([[418],{8470:function(e,t,a){var n=a(1413),i=a(4236).Z.div((function(e){var t=e.justifyContent,a=e.alignItems,i=e.flexDirection,s=e.gap,r=e.padding,l=e.margin,d={display:"flex",justifyContent:t,alignItems:a,gap:"number"===typeof s?"".concat(s,"px"):s};return i&&(d.flexDirection=i),r&&(d.padding=r),l&&(d.margin=l),(0,n.Z)({},d)}));t.Z=i},3418:function(e,t,a){a.r(t),a.d(t,{IdleReport:function(){return Z}});var n=a(4165),i=a(5861),s=a(9439),r=a(2791),l=a(2999),d=a(1717),c=a(7888),o=a(7309),u=a(3248),m=a(8470),p=a(1730),x=a(3685),h=a(7007),f=a(6610),v=a(184),_=l.Z.Option,g=d.Z.RangePicker,Z=function(){var e,t=(0,r.useState)([]),a=(0,s.Z)(t,2),d=a[0],Z=a[1],j=(0,r.useState)(!1),D=(0,s.Z)(j,2),Y=D[0],y=D[1],I=(0,r.useState)(null),S=(0,s.Z)(I,2),b=S[0],k=S[1],w=(0,r.useState)("All"),M=(0,s.Z)(w,2),A=M[0],C=M[1],N=(0,r.useState)([]),E=(0,s.Z)(N,2),P=E[0],L=E[1];(0,r.useEffect)((function(){var e;!function(){(e=e||(0,i.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.ZP.post("vehicle_list");case 3:(t=e.sent).data.success?L(t.data.data):console.error("API request was not successful"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching vehicle options:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}()}),[]);var R=[{title:"S.No",dataIndex:"s_no"},{title:"Vehicle Name",dataIndex:"vehicle_name"},{title:"Start Time",dataIndex:"start_time"},{title:"Start Location",dataIndex:"start_location"},{title:"End Time",dataIndex:"end_time"},{title:"End Time",dataIndex:"end_location"},{title:"Maximum Speed",dataIndex:"max_speed"},{title:"Average Speed",dataIndex:"avg_speed"},{title:"Distance (KM)",dataIndex:"distance"},{title:"Duration",dataIndex:"duration"},{title:"Map View",dataIndex:"map_view"}];return(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)(c.Z,{title:"Trip Report",children:[(0,v.jsx)(m.Z,{alignItems:"center",justifyContent:"space-between",mobileFlex:!1,children:(0,v.jsxs)(m.Z,{className:"mb-1",mobileFlex:!1,children:[(0,v.jsx)("div",{className:"mr-md-3 mr-3",children:(0,v.jsx)(g,{showTime:!0,name:"range_picker",format:"YYYY-MM-DD hh:mm:ss",onChange:function(e){k(e)}})}),(0,v.jsx)("div",{className:"mr-md-3 mb-3",children:(0,v.jsxs)(l.Z,{defaultValue:"All",className:"w-100",style:{minWidth:180},name:"vehicle_id",placeholder:"Vehicle",onChange:function(e){C(e)},value:A,children:[(0,v.jsx)(_,{value:"All",children:"All"}),Array.isArray(P)?P.map((function(e){return(0,v.jsx)(_,{value:e.device_imei,children:e.vehicle_name},e.device_imei)})):(0,v.jsx)(_,{value:"Loading",children:"Loading..."})]})}),(0,v.jsx)("div",{className:"mb-3",children:(0,v.jsx)(o.ZP,{type:"primary",success:!0,icon:(0,v.jsx)(p.Z,{}),onClick:function(){return(e=e||(0,i.Z)((0,n.Z)().mark((function e(){var t,a,i,r,l,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Selected Date Range:",b),b&&(t=(0,s.Z)(b,2),a=t[0],i=t[1],console.log("Start Date:",a.format("YYYY-MM-DD")),console.log("End Date:",i.format("YYYY-MM-DD"))),console.log("Selected Vehicle ID:",A),r={start_day:b?b[0].format("YYYY-MM-DD HH:mm:ss"):null,end_day:b?b[1].format("YYYY-MM-DD HH:mm:ss"):null,device_imei:"0"===A?null:A},Z([]),y(!0),e.prev=6,e.next=9,h.ZP.post("get_keyonoff_report",r);case 9:l=e.sent,console.log(l.data),l.data&&Array.isArray(l.data.data)?(c=l.data.data.map((function(e){return{s_no:e.id,vehicle_name:e.vehicle_name,start_time:e.start_datetime,start_location:e.start_latitude+":"+e.start_longitude,end_time:e.end_datetime,end_location:e.end_latitude+":"+e.end_longitude,max_speed:e.max_speed,avg_speed:e.avg_speed,distance:e.distance,duration:e.duration}})),console.log(c),Z(c),console.log("tripList:",d)):(Z([]),console.log("Response data is not in the expected format:",l.data)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(6),console.error(e.t0);case 17:y(!1);case 18:case"end":return e.stop()}}),e,null,[[6,14]])})))).apply(this,arguments)},children:"Search"})}),(0,v.jsx)("div",{className:"mb-3",children:(0,v.jsx)(o.ZP,{type:"primary",icon:(0,v.jsx)(x.Z,{}),onClick:function(){(new f.i).addSheet("test").addColumns(R).addDataSource(d,{str2Percent:!0}).saveAs("Excel.xlsx")},children:"Export"})})]})}),(0,v.jsx)("div",{className:"table-responsive",children:Y?(0,v.jsx)("div",{children:"Loading..."}):d.length>0?(0,v.jsx)(u.Z,{bordered:!0,columns:R,dataSource:d}):(0,v.jsx)("p",{children:"No Data Found"})})]})})};t.default=Z}}]);
//# sourceMappingURL=418.2de3ce8a.chunk.js.map