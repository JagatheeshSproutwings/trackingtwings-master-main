"use strict";(self.webpackChunkemilus=self.webpackChunkemilus||[]).push([[389],{5879:function(e,n,r){r(2791);var t=r(9004),i=r(184);n.Z=function(){return(0,i.jsx)("div",{children:(0,i.jsx)(t.Z,{})})}},2373:function(e,n,r){r.r(n),r.d(n,{Admin:function(){return D},default:function(){return G}});var t=r(4165),i=r(5861),l=r(9439),s=r(2791),o=r(364),a=r(2999),u=r(6106),d=r(914),c=r(7615),h=r(7888),v=r(3640),p=r(7313),x=r(9961),m=r(3407),Z=r(6042),f=r(5758),j=r(6443),g=r(9645),_=r(4914),y=(r(9325),r(1900),r(2438),r(1923),r(5879),r(3706),r(8559)),S=r.n(y),w=r(184);S().icon({iconUrl:"/img/ICONS/GREEN/car.png",iconSize:[40,40],iconAnchor:[18,18],popupAnchor:[0,-10],shadowAnchor:[10,10]});var b=r(8792),k=r(2266),z=r(2439),C=r(827),I=r(9806),A=r(1632),P=r(7007);var q=function(){var e=(0,s.useState)([]),n=(0,l.Z)(e,2),r=n[0],o=n[1],a=(0,s.useState)(""),c=(0,l.Z)(a,2),h=c[0],v=(c[1],(0,s.useState)(!1)),p=(0,l.Z)(v,2),x=(p[0],p[1],(0,s.useState)(!1)),m=(0,l.Z)(x,2);m[0],m[1],(0,s.useEffect)((function(){var e=setInterval((function(){Z()}),1e3);return function(){clearInterval(e)}}),[]);var Z=function(){var e=(0,i.Z)((0,t.Z)().mark((function e(n){var r,i,l,s,a,u;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.ZP.get("multi_dashboard").then((function(e){return e})).catch((function(e){console.log(e)}));case 2:l=e.sent,console.log(null===l||void 0===l||null===(r=l.data)||void 0===r?void 0:r.data),null!==l&&void 0!==l&&null!==(i=l.data)&&void 0!==i&&i.data&&""!=h&&(a=null===l||void 0===l||null===(s=l.data)||void 0===s?void 0:s.data.filter((function(e){return 3===e.vehicle_current_status})),console.log(a),u=a.map((function(e){return{id:null===e||void 0===e?void 0:e.id,title:(null===e||void 0===e?void 0:e.vehicle_name)||"TEST",description:(null===e||void 0===e?void 0:e.device_updatedtime)||"0000-00-00 00:00:00",color:j.t1,speed:(null===e||void 0===e?void 0:e.speed)||0,gps_count:20,gsm_count:15}})),o(u));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(b.ZP,{style:{padding:0,margin:1,fontSize:"10px",border:"1px"},itemLayout:"horizontal",size:"small",dataSource:r,renderItem:function(e){return(0,w.jsxs)(b.ZP.Item,{value:null===e||void 0===e?void 0:e.id,actions:[(0,w.jsx)("a",{children:(0,w.jsx)(I.G,{icon:A.Uwo,style:{fontSize:"15px",padding:"0",color:j.uD}})},"list-loadmore-more")],children:[(0,w.jsx)(b.ZP.Item.Meta,{avatar:(0,w.jsx)(k.C,{size:"small",style:{backgroundColor:"transparent"},icon:(0,w.jsx)(z.Z,{style:{fontSize:"20px",padding:"0",color:e.color}})}),title:(0,w.jsx)("span",{style:{fontSize:"12px"},children:e.title}),description:(0,w.jsx)("span",{style:{fontSize:"10px"},children:e.description})}),(0,w.jsxs)(u.Z,{style:{padding:0},children:[(0,w.jsx)(d.Z,{className:"ml-13",children:(0,w.jsxs)("h6",{children:[e.speed," KMPH"]})}),(0,w.jsx)(d.Z,{className:"ml-2",children:(0,w.jsx)(C.Z,{style:{fontSize:"15px",color:j._5}})}),(0,w.jsx)(d.Z,{className:"ml-2",children:(0,w.jsx)(I.G,{icon:A.TqS,style:{fontSize:"15px",color:j.uD}})}),(0,w.jsx)(d.Z,{className:"ml-2",children:(0,w.jsx)(I.G,{icon:A.oso,style:{fontSize:"15px",color:j._5}})})]})]})}})})},O=(r(2362),r(6287),r(7276),a.Z.Option),D=function(){var e,n,r=(0,s.useState)(),j=(0,l.Z)(r,2),y=j[0],S=j[1],b=(0,s.useState)(),k=(0,l.Z)(b,2),z=k[0],C=k[1],I=(0,s.useState)([]),A=(0,l.Z)(I,2),D=A[0],G=A[1],N=(0,s.useState)(""),E=(0,l.Z)(N,2),M=(E[0],E[1]),R=(0,s.useState)([]),V=(0,l.Z)(R,2),L=V[0],T=V[1],F=(0,s.useState)([]),K=(0,l.Z)(F,2),U=K[0],B=K[1],H=(0,s.useState)([]),J=(0,l.Z)(H,2),W=(J[0],J[1]),Q=(0,s.useState)([]),X=(0,l.Z)(Q,2),Y=(X[0],X[1]),$=(0,s.useState)(!1),ee=(0,l.Z)($,2),ne=(ee[0],ee[1]),re=(0,s.useState)(!1),te=(0,l.Z)(re,2),ie=(te[0],te[1]),le=(0,s.useState)(!1),se=(0,l.Z)(le,2),oe=(se[0],se[1],(0,s.useState)(!1)),ae=(0,l.Z)(oe,2),ue=(ae[0],ae[1],(0,s.useState)(!1)),de=(0,l.Z)(ue,2),ce=(de[0],de[1],(0,s.useState)({})),he=(0,l.Z)(ce,2),ve=(he[0],he[1],(0,o.v9)((function(e){return e.auth}))),pe=null===ve||void 0===ve||null===(e=ve.user_info)||void 0===e?void 0:e.role_id,xe=null===ve||void 0===ve||null===(n=ve.user_info)||void 0===n?void 0:n.id;console.log(pe);var me=function(){var e=(0,i.Z)((0,t.Z)().mark((function e(){var n,r,i,l;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={user_id:xe},e.next=3,P.ZP.post("role_based_user_list",i).then((function(e){return e})).catch((function(e){return[]}));case 3:l=e.sent,G(null===l||void 0===l||null===(n=l.data)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.user_list);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ze=function(){var e=(0,i.Z)((0,t.Z)().mark((function e(){var n,r,i,l,s,o,a,u,d,c;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={user_id:xe},e.next=3,P.ZP.post("role_based_user_list",s).then((function(e){return e})).catch((function(e){return[]}));case 3:(null===(o=e.sent)||void 0===o||null===(n=o.data)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.user_list.length)>0&&(console.log(null===o||void 0===o||null===(a=o.data)||void 0===a||null===(u=a.data)||void 0===u?void 0:u.user_list[0].id),M(null===o||void 0===o||null===(d=o.data)||void 0===d||null===(c=d.data)||void 0===c?void 0:c.user_list[0].id)),T(null===o||void 0===o||null===(i=o.data)||void 0===i||null===(l=i.data)||void 0===l?void 0:l.user_list);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fe=function(){var e=(0,i.Z)((0,t.Z)().mark((function e(){var n,r,i,l;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={user_id:xe},e.next=3,P.ZP.post("role_based_user_list",i).then((function(e){return e})).catch((function(e){return[]}));case 3:l=e.sent,B(null===l||void 0===l||null===(n=l.data)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.user_list);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),je=function(){var e=(0,i.Z)((0,t.Z)().mark((function e(){var n,r,i,l;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={user_id:xe},e.next=3,P.ZP.post("role_based_user_list",i).then((function(e){return e})).catch((function(e){return[]}));case 3:l=e.sent,W(null===l||void 0===l||null===(n=l.data)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.user_list);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ge=function(){var e=(0,i.Z)((0,t.Z)().mark((function e(){var n,r,i,l;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={user_id:xe},e.next=3,P.ZP.post("role_based_user_list",i).then((function(e){return e})).catch((function(e){return[]}));case 3:l=e.sent,Y(null===l||void 0===l||null===(n=l.data)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.user_list);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_e=function(){var e=(0,i.Z)((0,t.Z)().mark((function e(n){var r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={user_id:n},e.next=3,P.ZP.post("role_based_user_list",r).then((function(e){return e})).catch((function(e){return[]}));case 3:e.sent;case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();(0,s.useEffect)((function(){S(localStorage.getItem("role")),C(localStorage.getItem("id")),function(){if(1===pe){ne(!0);var e=_e(z);G(e)}2===pe&&(ie(!0),Ze(),console.log(L))}()}),[]);var ye=[51.505,-.09],Se=p.et.BaseLayer,we=function(e,n){var r=e,t=n.role_id;switch(console.log(r),console.log(t),t){case 1:return me(r);case 2:return Ze(r);case 3:return fe(r);case 4:return je(r);case 5:return ge(r)}};return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(u.Z,{style:{height:"700",margin:"0",padding:"0"},children:(0,w.jsx)(d.Z,{xs:24,sm:24,md:24,lg:24,style:{padding:0,margin:0},children:(0,w.jsxs)(u.Z,{gutter:6,style:{padding:0,margin:0},children:[(0,w.jsxs)(d.Z,{sm:12,md:6,lg:6,style:{padding:0,margin:0},children:[(0,w.jsxs)(c.Z,{name:"customer-form",layout:"inline",size:"small",children:[1==y&&(0,w.jsx)(d.Z,{xs:12,children:(0,w.jsx)(c.Z.Item,{name:"admin_id",size:"small",rules:[{required:!0,message:"Admin Value is Required!"}],children:(0,w.jsx)(a.Z,{showSearch:!0,onChange:we,placeholder:"Admin",children:Array.isArray(D)?D.map((function(e){return(0,w.jsx)(a.Z.Option,{role_id:"2",value:null===e||void 0===e?void 0:e.id,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e.id)})):(0,w.jsx)(a.Z.Option,{value:"",role_id:"3"})})})}),(1==y||2==y)&&(0,w.jsx)(d.Z,{xs:12,children:(0,w.jsx)(c.Z.Item,{name:"distributor_id",size:"small",rules:[{required:!0,message:"Distributor Value is Required!"}],children:(0,w.jsx)(a.Z,{showSearch:!0,onChange:we,placeholder:"Distributor",children:Array.isArray(L)?L.map((function(e){return(0,w.jsx)(a.Z.Option,{role_id:"3",value:null===e||void 0===e?void 0:e.id,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e.id)})):(0,w.jsx)(a.Z.Option,{value:"",role_id:"3"})})})}),(1==y||2==y||3==y)&&(0,w.jsx)(d.Z,{xs:12,children:(0,w.jsx)(c.Z.Item,{name:"dealer_id",rules:[{required:!0,message:"Dealer Value is Required!"}],children:(0,w.jsx)(a.Z,{showSearch:!0,onChange:we,placeholder:"Dealer",children:Array.isArray(U)?U.map((function(e){return(0,w.jsx)(a.Z.Option,{role_id:"4",value:null===e||void 0===e?void 0:e.id,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e.id)})):(0,w.jsx)(a.Z.Option,{value:"",role_id:"3"})})})}),(1==y||2==y||3==y||4==y)&&(0,w.jsx)(d.Z,{xs:12,children:(0,w.jsx)(c.Z.Item,{name:"subdealer_id",rules:[{required:!0,message:"SubDealer Value is Required!"}],children:(0,w.jsxs)(a.Z,{showSearch:!0,onChange:we,placeholder:"SubDealer",children:[(0,w.jsx)(O,{value:"1",role_id:"5",children:"Customer 1"}),(0,w.jsx)(O,{value:"2",role_id:"5",children:"Customer 2"}),(0,w.jsx)(O,{value:"3",role_id:"5",children:"Customer 3"}),(0,w.jsx)(O,{value:"4",role_id:"5",children:"Customer 4"})]})})}),(1==y||2==y||3==y||4==y||5==y)&&(0,w.jsx)(d.Z,{xs:12,children:(0,w.jsx)(c.Z.Item,{name:"client_id",rules:[{required:!0,message:"Customer Value is Required!"}],children:(0,w.jsxs)(a.Z,{showSearch:!0,onChange:we,placeholder:"Customer",children:[(0,w.jsx)(O,{value:"1",role_id:"6",children:"Customer 1"}),(0,w.jsx)(O,{value:"2",role_id:"6",children:"Customer 2"}),(0,w.jsx)(O,{value:"3",role_id:"6",children:"Customer 3"}),(0,w.jsx)(O,{value:"4",role_id:"6",children:"Customer 4"})]})})})]}),(0,w.jsx)(h.Z,{style:{padding:0,margin:0},children:(0,w.jsx)(g.L9,{style:{padding:0,margin:0},children:(0,w.jsx)(v.Z,{defaultActiveKey:"1",size:"small",items:[{label:"All",key:"1",children:(0,w.jsx)(q,{})},{label:"Moving",key:"2",children:(0,w.jsx)(_.Z,{})},{label:"Idle",key:"3",children:(0,w.jsx)(_.Z,{})},{label:"Parking",key:"4",children:(0,w.jsx)(_.Z,{})},{label:"No Data",key:"5",children:(0,w.jsx)(_.Z,{})},{label:"Inactive",key:"6",children:(0,w.jsx)(_.Z,{})},{label:"Expired",key:"7",children:(0,w.jsx)(_.Z,{})}]})})})]}),(0,w.jsx)(d.Z,{sm:12,md:18,lg:18,style:{padding:0},children:(0,w.jsxs)(x.h,{center:ye,zoom:13,scrollWheelZoom:!0,children:[(0,w.jsxs)(p.et,{children:[(0,w.jsx)(Se,{checked:!0,name:"OpenStreetMap",children:(0,w.jsx)(m.I,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'})}),(0,w.jsx)(Se,{name:"Google-Street View",children:(0,w.jsx)(m.I,{attribution:"Google Maps",url:"https://www.google.cn/maps/vt?lyrs=m@189&gl=cn&x={x}&y={y}&z={z}"})}),(0,w.jsx)(Se,{checked:!0,name:"Google-Satelite",children:(0,w.jsx)(m.I,{url:"https://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}",maxZoom:20,subdomains:["mt1","mt2","mt3"]})})]}),(0,w.jsx)(Z.J,{position:ye}),(0,w.jsx)(f.a,{pathOptions:{color:"lime"},positions:[[51.505,-.09],[51.51,-.1],[51.51,-.12]]})]})})]})})})})},G=D},7276:function(){}}]);
//# sourceMappingURL=389.50c2f8ae.chunk.js.map