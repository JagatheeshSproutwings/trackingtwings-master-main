"use strict";(self.webpackChunkemilus=self.webpackChunkemilus||[]).push([[572],{5879:function(e,n,r){r(2791);var t=r(3248),i=r(184);n.Z=function(){return(0,i.jsx)("div",{children:(0,i.jsx)(t.Z,{})})}},6329:function(e,n,r){r.r(n),r.d(n,{Admin:function(){return N},default:function(){return G}});var t=r(4165),i=r(5861),l=r(9439),s=r(2791),o=r(364),a=r(2999),u=r(6106),d=r(914),c=r(7615),h=r(7888),v=r(3640),p=r(7313),x=r(6443),m=r(9645),f=r(4914),Z=(r(9325),r(1900),r(2438),r(1923),r(5879),r(3706),r(8559)),j=r.n(Z),g=r(184);j().icon({iconUrl:"/img/ICONS/GREEN/car.png",iconSize:[40,40],iconAnchor:[18,18],popupAnchor:[0,-10],shadowAnchor:[10,10]});var _=r(8792),y=r(2266),S=r(2439),w=r(827),b=r(9806),k=r(1632),z=r(7007);var C=function(){var e=(0,s.useState)([]),n=(0,l.Z)(e,2),r=n[0],o=n[1],a=(0,s.useState)(""),c=(0,l.Z)(a,2),h=c[0],v=(c[1],(0,s.useState)(!1)),p=(0,l.Z)(v,2),m=(p[0],p[1],(0,s.useState)(!1)),f=(0,l.Z)(m,2);f[0],f[1],(0,s.useEffect)((function(){var e=setInterval((function(){Z()}),1e3);return function(){clearInterval(e)}}),[]);var Z=function(){var e=(0,i.Z)((0,t.Z)().mark((function e(n){var r,i,l,s,a,u;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.ZP.get("multi_dashboard").then((function(e){return e})).catch((function(e){console.log(e)}));case 2:l=e.sent,console.log(null===l||void 0===l||null===(r=l.data)||void 0===r?void 0:r.data),null!==l&&void 0!==l&&null!==(i=l.data)&&void 0!==i&&i.data&&""!=h&&(a=null===l||void 0===l||null===(s=l.data)||void 0===s?void 0:s.data.filter((function(e){return 3===e.vehicle_current_status})),console.log(a),u=a.map((function(e){return{id:null===e||void 0===e?void 0:e.id,title:(null===e||void 0===e?void 0:e.vehicle_name)||"TEST",description:(null===e||void 0===e?void 0:e.device_updatedtime)||"0000-00-00 00:00:00",color:x.t1,speed:(null===e||void 0===e?void 0:e.speed)||0,gps_count:20,gsm_count:15}})),o(u));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(_.ZP,{style:{padding:0,margin:1,fontSize:"10px",border:"1px"},itemLayout:"horizontal",size:"small",dataSource:r,renderItem:function(e){return(0,g.jsxs)(_.ZP.Item,{value:null===e||void 0===e?void 0:e.id,actions:[(0,g.jsx)("a",{children:(0,g.jsx)(b.G,{icon:k.Uwo,style:{fontSize:"15px",padding:"0",color:x.uD}})},"list-loadmore-more")],children:[(0,g.jsx)(_.ZP.Item.Meta,{avatar:(0,g.jsx)(y.C,{size:"small",style:{backgroundColor:"transparent"},icon:(0,g.jsx)(S.Z,{style:{fontSize:"20px",padding:"0",color:e.color}})}),title:(0,g.jsx)("span",{style:{fontSize:"12px"},children:e.title}),description:(0,g.jsx)("span",{style:{fontSize:"10px"},children:e.description})}),(0,g.jsxs)(u.Z,{style:{padding:0},children:[(0,g.jsx)(d.Z,{className:"ml-13",children:(0,g.jsxs)("h6",{children:[e.speed," KMPH"]})}),(0,g.jsx)(d.Z,{className:"ml-2",children:(0,g.jsx)(w.Z,{style:{fontSize:"15px",color:x._5}})}),(0,g.jsx)(d.Z,{className:"ml-2",children:(0,g.jsx)(b.G,{icon:k.TqS,style:{fontSize:"15px",color:x.uD}})}),(0,g.jsx)(d.Z,{className:"ml-2",children:(0,g.jsx)(b.G,{icon:k.oso,style:{fontSize:"15px",color:x._5}})})]})]})}})})},A=(r(2362),r(9961)),I=r(3407),P=r(9500),q=r(6287),D=r.n(q),O=function(){var e=(0,s.useState)([[51.505,-.09,30],[52,-.1,35],[51.7,-.2,40]]),n=(0,l.Z)(e,2),r=n[0],t=(n[1],(0,s.useState)([])),i=(0,l.Z)(t,2),o=(i[0],i[1],j().icon({iconUrl:"/img/ICONS/GREEN/car.png",iconSize:[40,40],iconAnchor:[18,18],popupAnchor:[0,-10],shadowAnchor:[10,10],rotationAngle:50})),a=(0,s.useRef)(null),u=p.et.BaseLayer,d=(0,s.useState)(0),c=(0,l.Z)(d,2),h=c[0],v=c[1];return(0,s.useEffect)((function(){var e=setInterval((function(){var e=h===r.length-1?0:h+1;r[e];v(e)}),2e3);return function(){clearInterval(e)}}),[r,h]),(0,s.useEffect)((function(){a.current&&a.current.setView(r[h],13)}),[h,r]),(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)(A.h,{center:r[0],zoom:13,style:{width:"100%"},children:[(0,g.jsxs)(p.et,{children:[(0,g.jsx)(u,{name:"OpenStreetMap",children:(0,g.jsx)(I.I,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'})}),(0,g.jsx)(u,{checked:!0,name:"Google-Street View",children:(0,g.jsx)(I.I,{attribution:"Google Maps",url:"https://www.google.cn/maps/vt?lyrs=m@189&gl=cn&x={x}&y={y}&z={z}"})}),(0,g.jsx)(u,{checked:!0,name:"Google-Satelite",children:(0,g.jsx)(I.I,{url:"https://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}",maxZoom:20,subdomains:["mt1","mt2","mt3"]})})]}),(0,g.jsx)(D(),{position:r[h],icon:o,rotationAngle:50,keepAtCenter:!0,duration:2e4,children:(0,g.jsxs)(P.G,{children:[(0,g.jsx)("p",{style:{margin:0},children:"Vehicle Name:DL09AD8989"}),(0,g.jsx)("p",{style:{margin:0},children:"Speed:30KMPH"}),(0,g.jsx)("p",{style:{margin:0},children:"Last Updated:2023-09-12 18:54:00"}),(0,g.jsx)("p",{style:{margin:0},children:"Since:05:30:00"}),(0,g.jsx)("p",{style:{margin:0},children:"Since:05:30:00"}),(0,g.jsx)("p",{style:{margin:0},children:"Since:05:30:00"})]})})]})})},E=a.Z.Option,N=function(){var e,n,r=(0,s.useState)(),x=(0,l.Z)(r,2),Z=x[0],j=x[1],_=(0,s.useState)(),y=(0,l.Z)(_,2),S=y[0],w=y[1],b=(0,s.useState)([]),k=(0,l.Z)(b,2),A=k[0],I=k[1],P=(0,s.useState)(""),q=(0,l.Z)(P,2),D=(q[0],q[1]),N=(0,s.useState)([]),G=(0,l.Z)(N,2),R=G[0],V=G[1],M=(0,s.useState)([]),L=(0,l.Z)(M,2),U=L[0],F=L[1],K=(0,s.useState)([]),T=(0,l.Z)(K,2),B=(T[0],T[1]),H=(0,s.useState)([]),J=(0,l.Z)(H,2),Q=(J[0],J[1]),W=(0,s.useState)(!1),X=(0,l.Z)(W,2),Y=(X[0],X[1]),$=(0,s.useState)(!1),ee=(0,l.Z)($,2),ne=(ee[0],ee[1]),re=(0,s.useState)(!1),te=(0,l.Z)(re,2),ie=(te[0],te[1],(0,s.useState)(!1)),le=(0,l.Z)(ie,2),se=(le[0],le[1],(0,s.useState)(!1)),oe=(0,l.Z)(se,2),ae=(oe[0],oe[1],(0,s.useState)({})),ue=(0,l.Z)(ae,2),de=(ue[0],ue[1],(0,o.v9)((function(e){return e.auth}))),ce=null===de||void 0===de||null===(e=de.user_info)||void 0===e?void 0:e.role_id,he=null===de||void 0===de||null===(n=de.user_info)||void 0===n?void 0:n.id;console.log(ce);var ve=function(){var e=(0,i.Z)((0,t.Z)().mark((function e(){var n,r,i,l;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={user_id:he},e.next=3,z.ZP.post("role_based_user_list",i).then((function(e){return e})).catch((function(e){return[]}));case 3:l=e.sent,I(null===l||void 0===l||null===(n=l.data)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.user_list);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),pe=function(){var e=(0,i.Z)((0,t.Z)().mark((function e(){var n,r,i,l,s,o,a,u,d,c;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={user_id:he},e.next=3,z.ZP.post("role_based_user_list",s).then((function(e){return e})).catch((function(e){return[]}));case 3:(null===(o=e.sent)||void 0===o||null===(n=o.data)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.user_list.length)>0&&(console.log(null===o||void 0===o||null===(a=o.data)||void 0===a||null===(u=a.data)||void 0===u?void 0:u.user_list[0].id),D(null===o||void 0===o||null===(d=o.data)||void 0===d||null===(c=d.data)||void 0===c?void 0:c.user_list[0].id)),V(null===o||void 0===o||null===(i=o.data)||void 0===i||null===(l=i.data)||void 0===l?void 0:l.user_list);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),xe=function(){var e=(0,i.Z)((0,t.Z)().mark((function e(){var n,r,i,l;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={user_id:he},e.next=3,z.ZP.post("role_based_user_list",i).then((function(e){return e})).catch((function(e){return[]}));case 3:l=e.sent,F(null===l||void 0===l||null===(n=l.data)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.user_list);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),me=function(){var e=(0,i.Z)((0,t.Z)().mark((function e(){var n,r,i,l;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={user_id:he},e.next=3,z.ZP.post("role_based_user_list",i).then((function(e){return e})).catch((function(e){return[]}));case 3:l=e.sent,B(null===l||void 0===l||null===(n=l.data)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.user_list);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fe=function(){var e=(0,i.Z)((0,t.Z)().mark((function e(){var n,r,i,l;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={user_id:he},e.next=3,z.ZP.post("role_based_user_list",i).then((function(e){return e})).catch((function(e){return[]}));case 3:l=e.sent,Q(null===l||void 0===l||null===(n=l.data)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.user_list);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ze=function(){var e=(0,i.Z)((0,t.Z)().mark((function e(n){var r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={user_id:n},e.next=3,z.ZP.post("role_based_user_list",r).then((function(e){return e})).catch((function(e){return[]}));case 3:e.sent;case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();(0,s.useEffect)((function(){j(localStorage.getItem("role")),w(localStorage.getItem("id")),function(){if(1===ce){Y(!0);var e=Ze(S);I(e)}2===ce&&(ne(!0),pe(),console.log(R))}()}),[]);p.et.BaseLayer;var je=function(e,n){var r=e,t=n.role_id;switch(console.log(r),console.log(t),t){case 1:return ve(r);case 2:return pe(r);case 3:return xe(r);case 4:return me(r);case 5:return fe(r)}};return(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(u.Z,{style:{height:"700",margin:"0",padding:"0"},children:(0,g.jsx)(d.Z,{xs:24,sm:24,md:24,lg:24,style:{padding:0,margin:0},children:(0,g.jsxs)(u.Z,{gutter:6,style:{padding:0,margin:0},children:[(0,g.jsxs)(d.Z,{sm:12,md:6,lg:6,style:{padding:0,margin:0},children:[(0,g.jsxs)(c.Z,{name:"customer-form",layout:"inline",size:"small",children:[1==Z&&(0,g.jsx)(d.Z,{xs:12,children:(0,g.jsx)(c.Z.Item,{name:"admin_id",size:"small",rules:[{required:!0,message:"Admin Value is Required!"}],children:(0,g.jsx)(a.Z,{showSearch:!0,onChange:je,placeholder:"Admin",children:Array.isArray(A)?A.map((function(e){return(0,g.jsx)(a.Z.Option,{role_id:"2",value:null===e||void 0===e?void 0:e.id,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e.id)})):(0,g.jsx)(a.Z.Option,{value:"",role_id:"3"})})})}),(1==Z||2==Z)&&(0,g.jsx)(d.Z,{xs:12,children:(0,g.jsx)(c.Z.Item,{name:"distributor_id",size:"small",rules:[{required:!0,message:"Distributor Value is Required!"}],children:(0,g.jsx)(a.Z,{showSearch:!0,onChange:je,placeholder:"Distributor",children:Array.isArray(R)?R.map((function(e){return(0,g.jsx)(a.Z.Option,{role_id:"3",value:null===e||void 0===e?void 0:e.id,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e.id)})):(0,g.jsx)(a.Z.Option,{value:"",role_id:"3"})})})}),(1==Z||2==Z||3==Z)&&(0,g.jsx)(d.Z,{xs:12,children:(0,g.jsx)(c.Z.Item,{name:"dealer_id",rules:[{required:!0,message:"Dealer Value is Required!"}],children:(0,g.jsx)(a.Z,{showSearch:!0,onChange:je,placeholder:"Dealer",children:Array.isArray(U)?U.map((function(e){return(0,g.jsx)(a.Z.Option,{role_id:"4",value:null===e||void 0===e?void 0:e.id,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e.id)})):(0,g.jsx)(a.Z.Option,{value:"",role_id:"3"})})})}),(1==Z||2==Z||3==Z||4==Z)&&(0,g.jsx)(d.Z,{xs:12,children:(0,g.jsx)(c.Z.Item,{name:"subdealer_id",rules:[{required:!0,message:"SubDealer Value is Required!"}],children:(0,g.jsxs)(a.Z,{showSearch:!0,onChange:je,placeholder:"SubDealer",children:[(0,g.jsx)(E,{value:"1",role_id:"5",children:"Customer 1"}),(0,g.jsx)(E,{value:"2",role_id:"5",children:"Customer 2"}),(0,g.jsx)(E,{value:"3",role_id:"5",children:"Customer 3"}),(0,g.jsx)(E,{value:"4",role_id:"5",children:"Customer 4"})]})})}),(1==Z||2==Z||3==Z||4==Z||5==Z)&&(0,g.jsx)(d.Z,{xs:12,children:(0,g.jsx)(c.Z.Item,{name:"client_id",rules:[{required:!0,message:"Customer Value is Required!"}],children:(0,g.jsxs)(a.Z,{showSearch:!0,onChange:je,placeholder:"Customer",children:[(0,g.jsx)(E,{value:"1",role_id:"6",children:"Customer 1"}),(0,g.jsx)(E,{value:"2",role_id:"6",children:"Customer 2"}),(0,g.jsx)(E,{value:"3",role_id:"6",children:"Customer 3"}),(0,g.jsx)(E,{value:"4",role_id:"6",children:"Customer 4"})]})})})]}),(0,g.jsx)(h.Z,{style:{padding:0,margin:0},children:(0,g.jsx)(m.L9,{style:{padding:0,margin:0},children:(0,g.jsx)(v.Z,{defaultActiveKey:"1",size:"small",items:[{label:"All",key:"1",children:(0,g.jsx)(C,{})},{label:"Moving",key:"2",children:(0,g.jsx)(f.Z,{})},{label:"Idle",key:"3",children:(0,g.jsx)(f.Z,{})},{label:"Parking",key:"4",children:(0,g.jsx)(f.Z,{})},{label:"No Data",key:"5",children:(0,g.jsx)(f.Z,{})},{label:"Inactive",key:"6",children:(0,g.jsx)(f.Z,{})},{label:"Expired",key:"7",children:(0,g.jsx)(f.Z,{})}]})})})]}),(0,g.jsx)(d.Z,{sm:12,md:18,lg:18,style:{padding:0},children:(0,g.jsx)(O,{})})]})})})})},G=N}}]);
//# sourceMappingURL=572.126e738f.chunk.js.map