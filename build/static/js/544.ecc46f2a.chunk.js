"use strict";(self.webpackChunkemilus=self.webpackChunkemilus||[]).push([[544],{5879:function(e,t,n){n(2791);var i=n(3248),r=n(184);t.Z=function(){return(0,r.jsx)("div",{children:(0,r.jsx)(i.Z,{})})}},7898:function(e,t,n){n.r(t),n.d(t,{Admin:function(){return D},default:function(){return M}});var i=n(4165),r=n(5861),o=n(9439),a=n(2791),s=n(364),l=n(2999),u=n(6106),d=n(914),c=n(7615),v=n(7888),p=n(3640),h=n(7313),f=n(6443),g=n(9645),m=(n(4914),n(9325),n(1900),n(2438),n(1923),n(5879),n(3706)),_=n(8559),x=n.n(_),y=n(184);x().icon({iconUrl:"/img/ICONS/GREEN/car.png",iconSize:[40,40],iconAnchor:[18,18],popupAnchor:[0,-10],shadowAnchor:[10,10]});var Z=n(8792),j=n(2266),b=n(1810),S=n(2439),O=n(827),w=n(9806),A=n(1632),k=n(7007);var C=function(e){var t,n,s=e.status,l=(0,a.useState)([]),c=(0,o.Z)(l,2),v=c[0],p=c[1],h=(0,a.useState)(s),g=(0,o.Z)(h,2),m=g[0],_=(g[1],(0,a.useState)(!1)),x=(0,o.Z)(_,2),C=(x[0],x[1],(0,a.useState)(!1)),L=(0,o.Z)(C,2),P=(L[0],L[1],function(e){switch(console.log(e),e){case 1:return f.dp;case 2:return f.t1;case 3:return f.uD;case 4:return f._5;case 5:default:return f.TG;case 6:return f.F3}}),I=function(e){switch(e){case 1:return"Parking";case 2:return"Idle";case 3:return"Moving";case 4:default:return"No Data";case 5:return"Inactive";case 6:return"Expired"}},T=function(e){return(n=n||(0,r.Z)((0,i.Z)().mark((function e(t){var n,r,o,a,s,l,u,d;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.ZP.get("multi_dashboard").then((function(e){return e})).catch((function(e){console.log(e)}));case 2:null!==(r=e.sent)&&void 0!==r&&null!==(n=r.data)&&void 0!==n&&n.data&&""!=m?(a=null===r||void 0===r||null===(o=r.data)||void 0===o?void 0:o.data.filter((function(e){return e.vehicle_current_status===m})),s=null===a||void 0===a?void 0:a.map((function(e){return{id:null===e||void 0===e?void 0:e.id,live_status:I(null===e||void 0===e?void 0:e.vehicle_current_status),device_imei:null===e||void 0===e?void 0:e.device_imei,title:(null===e||void 0===e?void 0:e.vehicle_name)||"TEST",description:(null===e||void 0===e?void 0:e.device_updatedtime)||"0000-00-00 00:00:00",color:P(null===e||void 0===e?void 0:e.vehicle_current_status),speed:(null===e||void 0===e?void 0:e.speed)||0,gps_count:"1"==(null===e||void 0===e?void 0:e.gpssignal)?f.uD:f._5,gsm_count:"1"==(null===e||void 0===e?void 0:e.gsm_status)?f.uD:f._5,power_status:null!==e&&void 0!==e&&e.power_status?f.uD:f._5}})),p(s)):(u=null===r||void 0===r||null===(l=r.data)||void 0===l?void 0:l.data,d=null===u||void 0===u?void 0:u.map((function(e){return{id:null===e||void 0===e?void 0:e.id,device_imei:null===e||void 0===e?void 0:e.device_imei,live_status:P(null===e||void 0===e?void 0:e.vehicle_current_status),title:(null===e||void 0===e?void 0:e.vehicle_name)||"TEST",description:(null===e||void 0===e?void 0:e.device_updatedtime)||"0000-00-00 00:00:00",color:P(null===e||void 0===e?void 0:e.vehicle_current_status),speed:(null===e||void 0===e?void 0:e.speed)||0,gps_count:"1"==(null===e||void 0===e?void 0:e.gpssignal)?f.uD:f._5,gsm_count:"1"==(null===e||void 0===e?void 0:e.gsm_status)?f.uD:f._5,power_status:null!==e&&void 0!==e&&e.power_status?f.uD:f._5}})),p(d));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)};return(0,a.useEffect)((function(){T(s);var e=setInterval((function(){T(s)}),5e3);return function(){clearInterval(e)}}),[]),(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(Z.ZP,{style:{padding:0,margin:1,fontSize:"10px",border:"1px"},itemLayout:"horizontal",size:"small",dataSource:v,renderItem:function(e){return(0,y.jsxs)(Z.ZP.Item,{onClick:function(){return function(e){return(t=t||(0,r.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,k.ZP.get("single_dashboard/"+t).then((function(e){return e})).catch((function(e){console.log(e)}));case 3:n=e.sent,console.log(n);case 5:console.log(t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(null===e||void 0===e?void 0:e.device_imei)},value:null===e||void 0===e?void 0:e.id,actions:[(0,y.jsx)("a",{children:(0,y.jsx)(w.G,{icon:A.Uwo,style:{fontSize:"15px",padding:"0",color:f.uD}})},"list-loadmore-more")],children:[(0,y.jsx)(Z.ZP.Item.Meta,{avatar:(0,y.jsx)(j.C,{size:"small",style:{backgroundColor:"transparent"},icon:(0,y.jsx)(S.Z,{style:{fontSize:"20px",padding:"0",color:e.color}})}),title:(0,y.jsx)("span",{style:{fontSize:"12px"},children:e.title}),description:(0,y.jsx)("span",{style:{fontSize:"10px"},children:e.description})}),(0,y.jsxs)(u.Z,{style:{padding:0},children:[(0,y.jsx)(d.Z,{className:"ml-13",children:(0,y.jsxs)("h6",{children:[e.speed," KMPH"]})}),(0,y.jsx)(d.Z,{className:"ml-2",children:(0,y.jsx)(b.Z,{title:"GPS Status",children:(0,y.jsx)(O.Z,{style:{fontSize:"15px",color:e.gps_count}})})}),(0,y.jsx)(d.Z,{className:"ml-2",children:(0,y.jsx)(b.Z,{title:"GSM Status",children:(0,y.jsx)(w.G,{icon:A.TqS,style:{fontSize:"15px",color:e.gsm_count}})})}),(0,y.jsx)(d.Z,{className:"ml-2",children:(0,y.jsx)(b.Z,{title:"Power Status",children:(0,y.jsx)(w.G,{icon:A.oso,style:{fontSize:"15px",color:e.power_status}})})})]})]})}})})};new(x().Icon)({iconUrl:"/img/ICONS/GREEN/car.png",iconSize:[40,40],iconAnchor:[18,18],popupAnchor:[0,-10],shadowAnchor:[10,10],className:"custom-icon"});var L=n(9961),P=n(3407),I=n(9500);function T(e){var t=e.data,n=(0,a.useState)(t||[]),i=(0,o.Z)(n,2),r=i[0],s=i[1];(0,a.useEffect)((function(){s(t)}),[t]);var l=null===r||void 0===r?void 0:r.map((function(e){return[null===e||void 0===e?void 0:e.latitude,null===e||void 0===e?void 0:e.longtitude]})),u=x().latLngBounds(l),d=(null===t||void 0===t?void 0:t.length)>0?[t[0].latitude,t[0].longtitude]:[0,0];return(0,y.jsxs)(L.h,{center:d,bounds:u,zoom:4,style:{height:"500px",width:"100%"},children:[(0,y.jsxs)(h.et,{children:[(0,y.jsx)(h.et.BaseLayer,{checked:!0,name:"OpenStreetMap",children:(0,y.jsx)(P.I,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'})}),(0,y.jsx)(h.et.BaseLayer,{name:"Google-Street View",children:(0,y.jsx)(P.I,{attribution:"Google Maps",url:"https://www.google.cn/maps/vt?lyrs=m@189&gl=cn&x={x}&y={y}&z={z}"})}),(0,y.jsx)(h.et.BaseLayer,{name:"Google-Satelite",children:(0,y.jsx)(P.I,{url:"https://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}",maxZoom:20,subdomains:["mt1","mt2","mt3"]})})]}),null===r||void 0===r?void 0:r.map((function(e){return(0,y.jsx)(m.z,{position:[null===e||void 0===e?void 0:e.latitude,null===e||void 0===e?void 0:e.longtitude],duration:1e4,rotationAngle:null===e||void 0===e?void 0:e.angle,icon:(t=null===e||void 0===e?void 0:e.icon_url,x().icon({iconUrl:t,iconSize:[40,40],iconAnchor:[18,18],popupAnchor:[0,-10]})),keepAtCenter:3==(null===e||void 0===e?void 0:e.vehicle_current_status),draggable:!0,children:(0,y.jsxs)(I.G,{children:[(0,y.jsxs)("p",{style:{margin:0},children:[(0,y.jsx)("b",{children:"Vehicle Name: "}),"  ",null===e||void 0===e?void 0:e.title]}),(0,y.jsxs)("p",{style:{margin:0},children:[(0,y.jsx)("b",{children:"Status: "}),null===e||void 0===e?void 0:e.live_status," (",(null===e||void 0===e?void 0:e.last_duration)||"00:00:00",") HH:MM:SS "]}),(0,y.jsxs)("p",{style:{margin:0},children:[(0,y.jsx)("b",{children:"Speed: "})," ",null===e||void 0===e?void 0:e.speed," KMPH"]}),(0,y.jsxs)("p",{style:{margin:0},children:[(0,y.jsx)("b",{children:"Last Update: "})," ",null===e||void 0===e?void 0:e.device_time]})]})},null===e||void 0===e?void 0:e.id);var t}))]})}l.Z.Option;var D=function(){var e,t,n,m,_,x,Z,j,b,S=(0,a.useState)(),O=(0,o.Z)(S,2),w=O[0],A=O[1],L=(0,a.useState)(),P=(0,o.Z)(L,2),I=P[0],D=P[1],M=(0,a.useState)([]),z=(0,o.Z)(M,2),E=z[0],R=z[1],N=(0,a.useState)(""),U=(0,o.Z)(N,2),B=(U[0],U[1]),G=(0,a.useState)([]),F=(0,o.Z)(G,2),q=F[0],H=F[1],W=(0,a.useState)([]),V=(0,o.Z)(W,2),K=V[0],Y=V[1],X=(0,a.useState)([]),J=(0,o.Z)(X,2),Q=J[0],$=J[1],ee=(0,a.useState)([]),te=(0,o.Z)(ee,2),ne=te[0],ie=te[1],re=(0,a.useState)(!1),oe=(0,o.Z)(re,2),ae=(oe[0],oe[1]),se=(0,a.useState)(!1),le=(0,o.Z)(se,2),ue=(le[0],le[1]),de=(0,a.useState)(!1),ce=(0,o.Z)(de,2),ve=(ce[0],ce[1],(0,a.useState)(!1)),pe=(0,o.Z)(ve,2),he=(pe[0],pe[1],(0,a.useState)(!1)),fe=(0,o.Z)(he,2),ge=(fe[0],fe[1],(0,a.useState)({})),me=(0,o.Z)(ge,2),_e=(me[0],me[1],(0,a.useState)("")),xe=(0,o.Z)(_e,2),ye=xe[0],Ze=(xe[1],(0,s.v9)((function(e){return e.auth}))),je=null===Ze||void 0===Ze||null===(e=Ze.user_info)||void 0===e?void 0:e.role_id,be=null===Ze||void 0===Ze||null===(t=Ze.user_info)||void 0===t?void 0:t.id,Se=(0,a.useState)("1"),Oe=(0,o.Z)(Se,2),we=Oe[0],Ae=Oe[1],ke=(0,a.useState)(1),Ce=(0,o.Z)(ke,2),Le=(Ce[0],Ce[1],(0,a.useState)([])),Pe=(0,o.Z)(Le,2),Ie=Pe[0],Te=Pe[1],De=function(){return(m=m||(0,r.Z)((0,i.Z)().mark((function e(){var t,n,r,o,a,s,l,u;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={user_id:be},e.next=3,k.ZP.post("role_based_user_list",a).then((function(e){return e})).catch((function(e){return[]}));case 3:(null===(s=e.sent)||void 0===s||null===(t=s.data)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.user_list.length)>0&&B(null===s||void 0===s||null===(l=s.data)||void 0===l||null===(u=l.data)||void 0===u?void 0:u.user_list[0].id),H(null===s||void 0===s||null===(r=s.data)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.user_list);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)},Me=function(e){return(j=j||(0,r.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={user_id:t},e.next=3,k.ZP.post("role_based_user_list",n).then((function(e){return e})).catch((function(e){return[]}));case 3:e.sent;case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)},ze=function(e){switch(e){case 1:return f.dp;case 2:return f.t1;case 3:return f.uD;case 4:return f._5;case 5:default:return f.TG;case 6:return f.F3}},Ee=function(e){switch(e){case 1:return"/img/ICONS/BLUE/";case 2:return"/img/ICONS/YELLOW/";case 3:return"/img/ICONS/GREEN/";case 4:return"/img/ICONS/RED/";case 5:default:return"/img/ICONS/GRAY/";case 6:return"/img/ICONS/PURPLE/"}},Re=function(e){switch(e){case 1:return"Parking";case 2:return"Idle";case 3:return"Moving";case 4:default:return"No Data";case 5:return"Inactive";case 6:return"Expired"}},Ne=function(e){return(b=b||(0,r.Z)((0,i.Z)().mark((function e(t){var n,r,o,a,s,l,u,d;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.ZP.get("multi_dashboard").then((function(e){return e})).catch((function(e){console.log(e)}));case 2:null!==(r=e.sent)&&void 0!==r&&null!==(n=r.data)&&void 0!==n&&n.data&&""!=ye?(a=null===r||void 0===r||null===(o=r.data)||void 0===o?void 0:o.data.filter((function(e){return e.vehicle_current_status===ye})),s=null===a||void 0===a?void 0:a.map((function(e){return{id:null===e||void 0===e?void 0:e.id,live_status:Re(null===e||void 0===e?void 0:e.vehicle_current_status),icon_url:Ee(null===e||void 0===e?void 0:e.vehicle_current_status)+(null===e||void 0===e?void 0:e.short_name)+".png",latitude:e.lattitute,longtitude:e.longitute,last_duration:null===e||void 0===e?void 0:e.last_duration,title:(null===e||void 0===e?void 0:e.vehicle_name)||"TEST",description:(null===e||void 0===e?void 0:e.device_updatedtime)||"0000-00-00 00:00:00",color:ze(null===e||void 0===e?void 0:e.vehicle_current_status),angle:(null===e||void 0===e?void 0:e.angle)||0,speed:(null===e||void 0===e?void 0:e.speed)||0,gps_count:20,gsm_count:15}})),Te(s)):(u=null===r||void 0===r||null===(l=r.data)||void 0===l?void 0:l.data,d=null===u||void 0===u?void 0:u.map((function(e){return{id:null===e||void 0===e?void 0:e.id,live_status:Re(null===e||void 0===e?void 0:e.vehicle_current_status),icon_url:Ee(null===e||void 0===e?void 0:e.vehicle_current_status)+(null===e||void 0===e?void 0:e.short_name)+".png",last_duration:null===e||void 0===e?void 0:e.last_duration,latitude:(null===e||void 0===e?void 0:e.lattitute)||0,longtitude:(null===e||void 0===e?void 0:e.longitute)||0,title:(null===e||void 0===e?void 0:e.vehicle_name)||"TEST",description:(null===e||void 0===e?void 0:e.device_updatedtime)||"0000-00-00 00:00:00",device_time:(null===e||void 0===e?void 0:e.device_updatedtime)||"0000-00-00 00:00:00",color:ze(null===e||void 0===e?void 0:e.vehicle_current_status),vehicle_current_status:null===e||void 0===e?void 0:e.vehicle_current_status,angle:(null===e||void 0===e?void 0:e.angle)||0,speed:(null===e||void 0===e?void 0:e.speed)||0,gps_count:20,gsm_count:15}})),Te(d));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)};(0,a.useEffect)((function(){A(localStorage.getItem("role")),D(localStorage.getItem("id")),function(){if(1===je){ae(!0);var e=Me(I);R(e)}2===je&&(ue(!0),De())}(),Ne();var e=setInterval((function(){Ne()}),2e3);return function(){clearInterval(e)}}),[]);h.et.BaseLayer;var Ue=[{key:"1",tab:"All",content:(0,y.jsx)(C,{status:""})},{key:"2",tab:"Parking",content:(0,y.jsx)(C,{status:1})},{key:"3",tab:"Idle",content:(0,y.jsx)(C,{status:2})},{key:"4",tab:"Moving",content:(0,y.jsx)(C,{status:3})},{key:"5",tab:"No Data",content:(0,y.jsx)(C,{status:4})},{key:"6",tab:"Inactive",content:(0,y.jsx)(C,{status:5})},{key:"7",tab:"Expired",content:(0,y.jsx)(C,{status:6})}],Be=function(e,t){var o=e;switch(t.role_id){case 1:return function(){return(n=n||(0,r.Z)((0,i.Z)().mark((function e(){var t,n,r,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={user_id:be},e.next=3,k.ZP.post("role_based_user_list",r).then((function(e){return e})).catch((function(e){return[]}));case 3:o=e.sent,R(null===o||void 0===o||null===(t=o.data)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.user_list);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(o);case 2:return De(o);case 3:return function(){return(_=_||(0,r.Z)((0,i.Z)().mark((function e(){var t,n,r,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={user_id:be},e.next=3,k.ZP.post("role_based_user_list",r).then((function(e){return e})).catch((function(e){return[]}));case 3:o=e.sent,Y(null===o||void 0===o||null===(t=o.data)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.user_list);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(o);case 4:return function(){return(x=x||(0,r.Z)((0,i.Z)().mark((function e(){var t,n,r,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={user_id:be},e.next=3,k.ZP.post("role_based_user_list",r).then((function(e){return e})).catch((function(e){return[]}));case 3:o=e.sent,$(null===o||void 0===o||null===(t=o.data)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.user_list);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(o);case 5:return function(){return(Z=Z||(0,r.Z)((0,i.Z)().mark((function e(){var t,n,r,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={user_id:be},e.next=3,k.ZP.post("role_based_user_list",r).then((function(e){return e})).catch((function(e){return[]}));case 3:o=e.sent,ie(null===o||void 0===o||null===(t=o.data)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.user_list);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(o)}};return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(u.Z,{style:{height:"700",margin:"0",padding:"0"},children:(0,y.jsx)(d.Z,{xs:24,sm:24,md:24,lg:24,style:{padding:0,margin:0},children:(0,y.jsxs)(u.Z,{gutter:6,style:{padding:0,margin:0},children:[(0,y.jsxs)(d.Z,{sm:12,md:6,lg:6,style:{padding:0,margin:0},children:[(0,y.jsxs)(c.Z,{name:"customer-form",layout:"inline",size:"small",children:[1==w&&(0,y.jsx)(d.Z,{xs:12,children:(0,y.jsx)(c.Z.Item,{name:"admin_id",size:"small",rules:[{required:!0,message:"Admin Value is Required!"}],children:(0,y.jsx)(l.Z,{showSearch:!0,onChange:Be,placeholder:"Admin",children:Array.isArray(E)?E.map((function(e){return(0,y.jsx)(l.Z.Option,{role_id:"2",value:null===e||void 0===e?void 0:e.id,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e.id)})):(0,y.jsx)(l.Z.Option,{value:"",role_id:"3"})})})}),(1==w||2==w)&&(0,y.jsx)(d.Z,{xs:12,children:(0,y.jsx)(c.Z.Item,{name:"distributor_id",size:"small",rules:[{required:!0,message:"Distributor Value is Required!"}],children:(0,y.jsx)(l.Z,{showSearch:!0,onChange:Be,placeholder:"Distributor",children:Array.isArray(q)?q.map((function(e){return(0,y.jsx)(l.Z.Option,{role_id:"3",value:null===e||void 0===e?void 0:e.id,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e.id)})):(0,y.jsx)(l.Z.Option,{value:"",role_id:"3"})})})}),(1==w||2==w||3==w)&&(0,y.jsx)(d.Z,{xs:12,children:(0,y.jsx)(c.Z.Item,{name:"dealer_id",rules:[{required:!0,message:"Dealer Value is Required!"}],children:(0,y.jsx)(l.Z,{showSearch:!0,onChange:Be,placeholder:"Dealer",children:Array.isArray(K)?K.map((function(e){return(0,y.jsx)(l.Z.Option,{role_id:"4",value:null===e||void 0===e?void 0:e.id,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e.id)})):(0,y.jsx)(l.Z.Option,{value:"",role_id:"3"})})})}),(1==w||2==w||3==w||4==w)&&(0,y.jsx)(d.Z,{xs:12,children:(0,y.jsx)(c.Z.Item,{name:"subdealer_id",children:(0,y.jsx)(l.Z,{showSearch:!0,onChange:Be,placeholder:"SubDealer",children:Array.isArray(Q)&&Q.map((function(e){null===e||void 0===e||e.name}))})})}),(1==w||2==w||3==w||4==w||5==w)&&(0,y.jsx)(d.Z,{xs:12,children:(0,y.jsx)(c.Z.Item,{name:"client_id",rules:[{required:!0,message:"Customer Value is Required!"}],children:(0,y.jsx)(l.Z,{showSearch:!0,onChange:Be,placeholder:"Customer",children:Array.isArray(ne)&&ne.map((function(e){null===ne||void 0===ne||ne.name}))})})})]}),(0,y.jsx)(v.Z,{style:{padding:0,margin:0},children:(0,y.jsx)(g.L9,{style:{padding:0,margin:0},children:(0,y.jsx)(p.Z,{activeKey:we,onChange:function(e){Ae(e)},children:Ue.map((function(e){return(0,y.jsx)(p.Z,{tab:e.tab,children:we===e.key&&(0,y.jsx)("div",{children:e.content})},e.key)}))})})})]}),(0,y.jsx)(d.Z,{sm:12,md:18,lg:18,children:(0,y.jsx)(T,{data:Ie})})]})})})})},M=D},5549:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BaseMarker=void 0;var i,r=(i=n(8559))&&i.__esModule?i:{default:i};var o="msTransform"===r.default.DomUtil.TRANSFORM;r.default.BaseMarker=r.default.Marker.extend({options:{bearingAngle:0,rotationOrigin:""},initialize:function(e,t){r.default.Marker.prototype.initialize.call(this),r.default.Util.setOptions(this,t),this._latlng=r.default.latLng(e);var n=this.options.icon&&this.options.icon.options&&this.options.icon.options.iconAnchor;n&&(n=n[0]+"px "+n[1]+"px"),this.options.rotationOrigin=this.options.rotationOrigin||n||"center",this.options.bearingAngle=this.options.bearingAngle||0,this.on("drag",(function(e){e.target._applyRotation()})),this.on("move",this.slideCancel,this),this._slideToUntil=0,this._slideToDuration=1e3,this._slideToLatLng=[0,0],this._slideFromLatLng=[0,0],this._slideKeepAtCenter=!1,this._slideDraggingWasAllowed=!1,this._slideFrame=0},slideTo:function(e,t){if(this._map)return this._slideToDuration=t.duration,this._slideToUntil=performance.now()+t.duration,this._slideFromLatLng=this.getLatLng(),this._slideToLatLng=e,this._slideKeepAtCenter=!!t.keepAtCenter,this._slideDraggingWasAllowed=void 0!==this._slideDraggingWasAllowed?this._slideDraggingWasAllowed:this._map.dragging.enabled(),this._slideKeepAtCenter&&(this._map.dragging.disable(),this._map.doubleClickZoom.disable(),this._map.options.touchZoom="center",this._map.options.scrollWheelZoom="center"),this.fire("movestart"),this._slideTo(),this},_slideTo:function(){if(this._map){var e=this._slideToUntil-performance.now();if(e<0)return this.setLatLng(this._slideToLatLng),this.fire("moveend"),this._slideDraggingWasAllowed&&(this._map.dragging.enable(),this._map.doubleClickZoom.enable(),this._map.options.touchZoom=!0,this._map.options.scrollWheelZoom=!0),this._slideDraggingWasAllowed=!1,this;var t=this._map.latLngToContainerPoint(this._slideFromLatLng),n=this._map.latLngToContainerPoint(this._slideToLatLng),i=(this._slideToDuration-e)/this._slideToDuration,o=n.multiplyBy(i).add(t.multiplyBy(1-i)),a=this._map.containerPointToLatLng(o);this.setLatLng(a),this._slideKeepAtCenter&&this._map.panTo(a,{animate:!1}),this._slideFrame=r.default.Util.requestAnimFrame(this._slideTo,this)}},slideCancel:function(){r.default.Util.cancelAnimFrame(this._slideFrame)},onRemove:function(e){r.default.Marker.prototype.onRemove.call(this,e)},_setPos:function(e){r.default.Marker.prototype._setPos.call(this,e),this._applyRotation()},_applyRotation:function(){this.options.bearingAngle&&(this._icon.style[r.default.DomUtil.TRANSFORM+"Origin"]=this.options.rotationOrigin,o?this._icon.style[r.default.DomUtil.TRANSFORM]="rotate("+this.options.bearingAngle+"deg)":this._icon.style[r.default.DomUtil.TRANSFORM]+=" rotateZ("+this.options.bearingAngle+"deg)")},setRotationAngle:function(e){return this.options.bearingAngle=e,this.update(),this},setRotationOrigin:function(e){return this.options.rotationOrigin=e,this.update(),this}}),r.default.baseMarker=function(e,t){return new r.default.BaseMarker(e,t)};var a=r.default.BaseMarker;t.BaseMarker=a},9390:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.LeafletTrackingMarker=void 0;var i=n(1366),r=n(5549),o=["position","previousPosition","rotationAngle"];function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var d=[0,0],c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0,n=Math.atan2(t[0]-e[0],t[1]-e[1]);return n=360-(n=((n*=180/Math.PI)+360)%360)},v=(0,i.createLayerComponent)((function(e,t){var n=e.position,i=e.previousPosition,a=e.rotationAngle,l=u(e,o),d=null!==a&&void 0!==a?a:c(i,n),v=new r.BaseMarker(n,s(s({},l),{},{bearingAngle:d}));return{instance:v,context:s(s({},t),{},{overlayContainer:v})}}),(function(e,t,n){var i=t.position,r=t.previousPosition,o=t.duration,a=t.keepAtCenter,s=t.icon,l=t.zIndexOffset,u=t.opacity,d=t.draggable,v=t.rotationOrigin,p=t.rotationAngle;if(n.position!==i&&"number"==typeof o&&e.slideTo(i,{duration:o,keepAtCenter:a}),s&&s!==n.icon&&e.setIcon(s),l&&l!==n.zIndexOffset&&e.setZIndexOffset(l),u&&u!==n.opacity&&e.setOpacity(u),e.dragging&&d!==n.draggable&&(!0===d?e.dragging.enable():e.dragging.disable()),null!==p&&void 0!==p)e.setRotationAngle(p);else if((null===r||void 0===r?void 0:r[0])!==i[0]&&(null===r||void 0===r?void 0:r[1])!==i[1]){var h=c(r,i);e.setRotationAngle(h)}v!==n.rotationOrigin&&e.setRotationOrigin(v)}));t.LeafletTrackingMarker=v},3706:function(e,t,n){Object.defineProperty(t,"z",{enumerable:!0,get:function(){return i.LeafletTrackingMarker}});var i=n(9390)},1366:function(e,t,n){n.r(t),n.d(t,{CONTEXT_VERSION:function(){return a.cV},LeafletContext:function(){return a.U1},LeafletProvider:function(){return a.UO},addClassName:function(){return c},createContainerComponent:function(){return o.RA},createControlComponent:function(){return g.vm},createControlHook:function(){return s.y},createDivOverlayComponent:function(){return o.LE},createDivOverlayHook:function(){return l.W},createElementHook:function(){return h.I},createElementObject:function(){return h.O},createLayerComponent:function(){return g.dW},createLayerHook:function(){return _.u},createLeafComponent:function(){return o.G5},createLeafletContext:function(){return a.Hb},createOverlayComponent:function(){return g.SO},createPathComponent:function(){return g.Au},createPathHook:function(){return Z.n},createTileLayerComponent:function(){return g.Lf},extendContext:function(){return a.sj},removeClassName:function(){return v},updateCircle:function(){return r},updateClassName:function(){return p},updateGridLayer:function(){return m.I},updateMediaOverlay:function(){return x},useAttribution:function(){return i.d},useEventHandlers:function(){return f.t},useLayerLifecycle:function(){return _.g},useLeafletContext:function(){return a.mE},usePathOptions:function(){return Z._},withPane:function(){return y.q}});var i=n(7259);function r(e,t,n){t.center!==n.center&&e.setLatLng(t.center),null!=t.radius&&t.radius!==n.radius&&e.setRadius(t.radius)}var o=n(1777),a=n(150),s=n(9825),l=n(7344),u=n(8559);function d(e){return e.split(" ").filter(Boolean)}function c(e,t){d(t).forEach((function(t){u.DomUtil.addClass(e,t)}))}function v(e,t){d(t).forEach((function(t){u.DomUtil.removeClass(e,t)}))}function p(e,t,n){null!=e&&n!==t&&(null!=t&&t.length>0&&v(e,t),null!=n&&n.length>0&&c(e,n))}var h=n(9359),f=n(2840),g=n(5362),m=n(287),_=n(821);function x(e,t,n){t.bounds instanceof u.LatLngBounds&&t.bounds!==n.bounds&&e.setBounds(t.bounds),null!=t.opacity&&t.opacity!==n.opacity&&e.setOpacity(t.opacity),null!=t.zIndex&&t.zIndex!==n.zIndex&&e.setZIndex(t.zIndex)}var y=n(9171),Z=n(1097)}}]);
//# sourceMappingURL=544.ecc46f2a.chunk.js.map