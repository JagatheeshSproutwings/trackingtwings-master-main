"use strict";(self.webpackChunkemilus=self.webpackChunkemilus||[]).push([[125],{8470:function(e,t,a){var n=a(1413),r=a(4236).Z.div((function(e){var t=e.justifyContent,a=e.alignItems,r=e.flexDirection,i=e.gap,s=e.padding,o=e.margin,l={display:"flex",justifyContent:t,alignItems:a,gap:"number"===typeof i?"".concat(i,"px"):i};return r&&(l.flexDirection=r),s&&(l.padding=s),o&&(l.margin=o),(0,n.Z)({},l)}));t.Z=r},8125:function(e,t,a){a.r(t),a.d(t,{DistanceReport:function(){return Z}});var n=a(4165),r=a(5861),i=a(9439),s=a(2791),o=a(2999),l=a(1717),d=a(7888),c=a(7354),m=a(3248),u=a(8470),h=a(1730),x=a(3685),f=a(7007),p=a(6610),_=a(184),v=o.Z.Option,g=l.Z.RangePicker,Z=function(){var e=(0,s.useState)([]),t=(0,i.Z)(e,2),a=t[0],l=t[1],Z=(0,s.useState)(!1),j=(0,i.Z)(Z,2),D=j[0],Y=j[1],y=(0,s.useState)(null),I=(0,i.Z)(y,2),S=I[0],b=I[1],w=(0,s.useState)("All"),k=(0,i.Z)(w,2),M=k[0],A=k[1],C=(0,s.useState)([]),N=(0,i.Z)(C,2),E=N[0],P=N[1];(0,s.useEffect)((function(){function e(){return(e=(0,r.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.ZP.get("vehicle_list");case 3:(t=e.sent).data.success?P(t.data.data):console.error("API request was not successful"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching vehicle options:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var L=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(){var t,r,s,o,d,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Selected Date Range:",S),S&&(t=(0,i.Z)(S,2),r=t[0],s=t[1],console.log("Start Date:",r.format("YYYY-MM-DD")),console.log("End Date:",s.format("YYYY-MM-DD"))),console.log("Selected Vehicle ID:",M),o={start_day:S?S[0].format("YYYY-MM-DD HH:mm:ss"):null,end_day:S?S[1].format("YYYY-MM-DD HH:mm:ss"):null,device_imei:"0"===M?null:M},l([]),Y(!0),e.prev=6,e.next=9,f.ZP.post("get_distance_report",o);case 9:d=e.sent,console.log(d.data),d.data&&Array.isArray(d.data.data)?(c=d.data.data.map((function(e){return{s_no:e.id,vehicle_name:e.vehicle_name,date:e.date,start_location:e.start_latitude+":"+e.start_longitude,start_time:e.start_time,start_odometer:e.start_odometer,end_location:e.end_latitude+":"+e.end_longitude,end_time:e.end_time,end_odometer:e.end_odometer,odometer_difference:e.odometer_difference}})),console.log(c),l(c),console.log("distanceList:",a)):(l([]),console.log("Response data is not in the expected format:",d.data)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(6),console.error(e.t0);case 17:Y(!1);case 18:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(){return e.apply(this,arguments)}}(),R=[{title:"S.No",dataIndex:"s_no"},{title:"Vehicle Name",dataIndex:"vehicle_name"},{title:"Date",dataIndex:"date"},{title:"Start Location",dataIndex:"start_location"},{title:"Start Time",dataIndex:"start_time"},{title:"Start Odometer",dataIndex:"start_odometer"},{title:"End Location",dataIndex:"end_location"},{title:"End Time",dataIndex:"end_time"},{title:"End Odometer",dataIndex:"end_odometer"},{title:"Distance (KM)",dataIndex:"odometer_difference"},{title:"Map View",dataIndex:"map_view"}];return(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)(d.Z,{title:"Distance Report",children:[(0,_.jsx)(u.Z,{alignItems:"center",justifyContent:"space-between",mobileFlex:!1,children:(0,_.jsxs)(u.Z,{className:"mb-1",mobileFlex:!1,children:[(0,_.jsx)("div",{className:"mr-md-3 mr-3",children:(0,_.jsx)(g,{showTime:!0,name:"range_picker",format:"YYYY-MM-DD hh:mm:ss",onChange:function(e){b(e)}})}),(0,_.jsx)("div",{className:"mr-md-3 mb-3",children:(0,_.jsxs)(o.Z,{defaultValue:"All",className:"w-100",style:{minWidth:180},name:"vehicle_id",placeholder:"Vehicle",onChange:function(e){A(e)},value:M,children:[(0,_.jsx)(v,{value:"All",children:"All"}),Array.isArray(E)?E.map((function(e){return(0,_.jsx)(v,{value:e.device_imei,children:e.vehicle_name},e.device_imei)})):(0,_.jsx)(v,{value:"Loading",children:"Loading..."})]})}),(0,_.jsx)("div",{className:"mb-3",children:(0,_.jsx)(c.ZP,{type:"primary",success:!0,icon:(0,_.jsx)(h.Z,{}),onClick:L,children:"Search"})}),(0,_.jsx)("div",{className:"mb-3",children:(0,_.jsx)(c.ZP,{type:"primary",icon:(0,_.jsx)(x.Z,{}),onClick:function(){(new p.i).addSheet("test").addColumns(R).addDataSource(a,{str2Percent:!0}).saveAs("Excel.xlsx")},children:"Export"})})]})}),(0,_.jsx)("div",{className:"table-responsive",children:D?(0,_.jsx)("div",{children:"Loading..."}):a.length>0?(0,_.jsx)(m.Z,{bordered:!0,columns:R,dataSource:a}):(0,_.jsx)("p",{children:"No Data Found"})})]})})};t.default=Z}}]);
//# sourceMappingURL=125.23fdf841.chunk.js.map